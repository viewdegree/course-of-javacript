<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			a{
				text-decoration: none;
				color: #000;
			}
			#wrap{
				width: 300px;
				height: 20px;
				margin: 0 auto;
				transform: translateY(50px)
			}
			#search{
				width: 100%;
				padding: 5px;
				text-indent: 10px;
				font-size: 16px;
				font-family: sans-serif;
				border: 1px solid cornflowerblue;
				outline: none;				
			}
			#smartWords{
				list-style: none;
				font-family: sans-serif;
				font-size: 12px;
				border: 1px solid #eee;
			}
			#smartWords li{
				width: 100%;
				padding: 5px;
				line-height: 20px;
			}
			#smartWords li>a{
				display: block;
				width: 100%;
			}
			#smartWords li:hover{
				background: #eee;
			}
		</style>
	</head>
	<body>
		<div id="wrap">
			<input type="text" id="search">
			<ul id="smartWords">
			</ul>
		</div>
		<script type="text/javascript">
			var search = document.getElementById("search");
			var smartWords = document.getElementById("smartWords")
			/* Todolist1 
			*1. 获取每次用户输入的input.value值
			*2. 通过jsonp去查询关键词位input.value的联想词
			* 	2.1 获取jsonp,创建script标签且src为查询input.value的jsonp链接
			* 	2.2 在body元素appendChild script元素
			*/
			search.oninput = function(){
				var value = this.value;
				var url = `https://www.baidu.com/sugrec?prod=pc&wd=${value}&cb=jsonpFn`
				var script = document.createElement('script')
				script.src = url;
				document.body.appendChild(script);
			}
			/* Todlist2 
			 *1.构建jsonp的同名函数
			 *2.设置参数data,使之能够传入参数
			 *3.获取json数组中的g->q的值
			 *4.将获取的值写入smartWords里面
			 *5.给a标签添加对应的跳转链接
			 * 5.1 通过百度的get请求链接的特点,构建链接
			 * 5.2将构建的链接置入到对应的a标签的href中
			*/
		    function jsonpFn(data){
				var g = data.g;
				var html = '';
				// 在拼接字符串的时候如果一次不行那就两次
				g && g.forEach(//g必须在不为undefiend的情况下可以
					(v)=>{
						console.log(v.q)
						html += `<li><a href='https://www.baidu.com/s?wd=${v.q}' target='_blank'>${v.q}</a></li>`
					}
				)
				smartWords.innerHTML = html; //直接替换无需拼接
			}
		</script>
	</body>
</html>